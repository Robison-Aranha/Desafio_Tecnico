DROP TABLE if EXISTS product CASCADE;
DROP TABLE if EXISTS "order" CASCADE;
DROP TABLE if EXISTS "user" CASCADE;

CREATE TABLE "user" (
	user_id NUMERIC(10) NOT NULL,
	name VARCHAR(45) NOT NULL
);
ALTER TABLE "user" ADD CONSTRAINT pk_user PRIMARY KEY (name);

CREATE TABLE "order" (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    order_id NUMERIC(10) NOT NULL,
    "date" DATE NOT NULL,
    user_id VARCHAR(45) NOT NULL
);

ALTER TABLE "order" ADD CONSTRAINT pk_order PRIMARY KEY (id);
ALTER TABLE "order" ADD CONSTRAINT fk_order_user_id FOREIGN KEY (user_id) REFERENCES "user";

CREATE TABLE product (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    product_id NUMERIC(10) NOT NULL,
    "value" DECIMAL(12, 2) NOT NULL,
    order_id BIGINT NOT NULL
);

ALTER TABLE product ADD CONSTRAINT pk_product PRIMARY KEY (id);
ALTER TABLE product ADD CONSTRAINT fk_product_order_id FOREIGN KEY (order_id) REFERENCES "order";

